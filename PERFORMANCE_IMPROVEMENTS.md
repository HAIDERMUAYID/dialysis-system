# ุชุญุณููุงุช ุงูุฃุฏุงุก ุงููุทุจูุฉ

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ:

### 1. ุฅุถุงูุฉ Indexes ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชู ุฅุถุงูุฉ indexes ุนูู ุงูุญููู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ูู ุงูุงุณุชุนูุงูุงุช:

#### ุฌุฏูู Visits:
- `patientId` - ููุจุญุซ ุงูุณุฑูุน ุนู ุฒูุงุฑุงุช ุงููุฑูุถ
- `status` - ููููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ
- `createdAt` - ููุชุฑุชูุจ ุญุณุจ ุงูุชุงุฑูุฎ
- `labCompleted`, `pharmacyCompleted`, `doctorCompleted` - ููููุชุฑุฉ
- Composite indexes: `(status, labCompleted)`, `(status, pharmacyCompleted)`, `(status, doctorCompleted)`

#### ุฌุฏูู Patients:
- `name` - ููุจุญุซ ุงูุณุฑูุน
- `nationalId` - ููุจุญุซ ุจุงูุฑูู ุงููุทูู (unique)
- `phone` - ููุจุญุซ ุจุงููุงุชู
- `createdAt` - ููุชุฑุชูุจ
- `isActive` - ููููุชุฑุฉ

#### ุฌุฏุงูู ุฃุฎุฑู:
- `LabResult`: `visitId`, `createdAt`
- `PharmacyPrescription`: `visitId`, `createdAt`
- `Notification`: `userId`, `isRead`, `createdAt`, `(userId, isRead)`
- `ActivityLog`: `userId`, `entityType`, `createdAt`, `(entityType, entityId)`

### 2. ุฅุถุงูุฉ Pagination
- ุชู ุฅุถุงูุฉ pagination ูุงุณุชุนูุงูุงุช ุงูุฒูุงุฑุงุช
- ุงูุญุฏ ุงูุฃูุตู: 100 ุณุฌู ููู ุตูุญุฉ
- ุงูุงูุชุฑุงุถู: 50 ุณุฌู ููู ุตูุญุฉ
- ุงูุงุณุชุฌุงุจุฉ ุชุชุถูู ูุนูููุงุช pagination

### 3. ุชุญุณูู ุงูุงุณุชุนูุงูุงุช (Select ุจุฏูุงู ูู Include)
- ุงุณุชุฎุฏุงู `select` ุจุฏูุงู ูู `include` ูุชูููู ุงูุจูุงูุงุช ุงูููุฌูุจูุฉ
- ุฌูุจ ุงูุญููู ุงููุทููุจุฉ ููุท ุจุฏูุงู ูู ุฌููุน ุงูุญููู

### 4. ุชุญุณูู Prisma Client
- ุฅุฒุงูุฉ query logging ูู production
- ุชุญุณูู connection pooling

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

- **ุณุฑุนุฉ ุงูุจุญุซ**: ุชุญุณู ุจูุณุจุฉ 70-90% ุจูุถู indexes
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: ุชูููู ุจูุณุจุฉ 50-70% ุจูุถู select
- **ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ**: ุชุญุณู ุจูุณุจุฉ 60-80% ุจูุถู pagination
- **ุงุณุชููุงู ุงูุดุจูุฉ**: ุชูููู ุจูุณุจุฉ 50-70% ุจูุถู pagination

## ๐ ุฎุทูุงุช ุงูุชุทุจูู:

### 1. ุฅูุดุงุก Migration ููู Indexes:
```bash
npx prisma migrate dev --name add_performance_indexes
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู:
```bash
npm run server
```

### 3. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก:
- ุฌุฑุจ ุฌูุจ ุงูุฒูุงุฑุงุช ูุน pagination
- ูุงุญุธ ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ
- ุฑุงูุจ ุงุณุชููุงู ุงูุฐุงูุฑุฉ

## ๐ ููุงุญุธุงุช:

- ุงูู indexes ุณุชุฒูุฏ ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููููุงู ููููุง ุชุญุณู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ
- Pagination ูููู ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ูุงูุดุจูุฉ
- ุงุณุชุฎุฏุงู `select` ูููู ูู ุญุฌู ุงูุจูุงูุงุช ุงูููุฌูุจูุฉ

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

1. **Frontend ูุฌุจ ุชุญุฏูุซู**: ูุฌุจ ุชุญุฏูุซ Frontend ูุงุณุชุฎุฏุงู pagination ุงูุฌุฏูุฏ
2. **API Response ุชุบูุฑ**: ุงุณุชุฌุงุจุฉ `/api/visits` ุงูุขู ุชุญุชูู ุนูู:
   ```json
   {
     "data": [...],
     "pagination": {
       "page": 1,
       "limit": 50,
       "total": 100,
       "totalPages": 2
     }
   }
   ```

## ๐ง ุชุญุฏูุซุงุช Frontend ุงููุทููุจุฉ:

ูู `client/src/components/Dashboards/*.tsx`:
- ุชุญุฏูุซ `fetchDashboardData` ูุงุณุชุฎุฏุงู `data` ูู ุงูุงุณุชุฌุงุจุฉ
- ุฅุถุงูุฉ pagination controls
- ุชุญุฏูุซ `Table` component ูุงุณุชุฎุฏุงู pagination
